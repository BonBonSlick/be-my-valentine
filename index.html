<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine's BabyðŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body{
  background: linear-gradient(180deg,#ffd0e5 0%,#ffe8f2 36%,#ffffff 100%);
  overflow:hidden;
}

.bounce2{
  animation:bounce2 2s infinite;
}

@keyframes bounce2{
  0%,20%,50%,80%,100%{transform:translateY(0)}
  40%{transform:translateY(-20px)}
  60%{transform:translateY(-10px)}
}
</style>
</head>

<body class="flex items-center justify-center h-screen">

<div id="mainContainer" class="flex flex-col items-center text-center">

<img id="imageDisplay"
src="./images/image1.gif"
class="rounded-md h-[300px] object-cover" />

<h2 id="valentineQuestion"
class="text-4xl font-bold italic text-[#bd1e59] my-4">
Will you be my Little Cutie Tiny Patootie Sweeeet Thumbelina Valentine?
</h2>

<div id="responseButtons" class="flex gap-4 pt-5 items-center relative">

<button id="yesButton"
class="bounce2 bg-green-500 hover:bg-green-400 text-white px-6 py-3 rounded-md text-[20px]">
Yes
</button>

<button id="noButton"
class="bg-red-500 hover:bg-red-700 text-white px-6 py-3 rounded-md text-[20px]">
No
</button>

</div>
</div>

<script>

const yesButton = document.getElementById('yesButton');
const noButton = document.getElementById('noButton');
const imageDisplay = document.getElementById('imageDisplay');
const valentineQuestion = document.getElementById('valentineQuestion');
const responseButtons = document.getElementById('responseButtons');

let noClickCount = 0;
let runawayButton = null;

/* ---------------- SOUNDS ---------------- */

const yesSound = new Audio('./sounds/yes.mp3');
const noSound = new Audio('./sounds/no.mp3');
const bgMusic = new Audio('./sounds/happy.mp3');

bgMusic.loop = true;
bgMusic.volume = 0.7;

/* ---------------- IMAGES ---------------- */

const imagePaths = [
'./images/image1.gif',
'./images/image2.gif',
'./images/image3.gif',
'./images/image4.gif',
'./images/image5.gif',
'./images/image6.gif',
'./images/image7.gif'
];

/* ---------------- NO BUTTON ---------------- */

noButton.addEventListener("click", () => {

noSound.currentTime = 0;
noSound.play();

if(noClickCount < 4){

noClickCount++;
imageDisplay.src = imagePaths[noClickCount];

const messages = [
"No",
"Are you sure?",
"Hoy, Baliw ka?",
"Ha?",
"Adikam putik",
"Haynako...",
"Say YES or else..."
];

if(noClickCount === 4){

runawayButton = document.createElement("button");
runawayButton.innerText = "Say yes or else...";
runawayButton.className =
"bg-red-500 text-white px-6 py-3 rounded-md text-[20px]";
runawayButton.style.position = "fixed";
runawayButton.style.zIndex = "999";

document.body.appendChild(runawayButton);
noButton.remove();

makeRunaway(runawayButton);

}else{
noButton.innerText = messages[noClickCount];
}
}
});

/* ---------------- RUNAWAY ---------------- */

function makeRunaway(button){

function moveButton(e){

if(e.type === "touchstart"){
e.preventDefault();
}

const maxX = window.innerWidth - button.offsetWidth;
const maxY = window.innerHeight - button.offsetHeight;

const randomX = Math.random() * maxX;
const randomY = Math.random() * maxY;

anime({
targets: button,
left: randomX + "px",
top: randomY + "px",
duration: 350,
easing: "easeOutExpo"
});

}

button.addEventListener("mouseenter", moveButton);
button.addEventListener("touchstart", moveButton, { passive:false });
button.addEventListener("click", moveButton);

}

/* ---------------- YES BUTTON ---------------- */

yesButton.addEventListener("click", () => {

yesSound.currentTime = 0;
yesSound.play();

/* remove runaway */
if(runawayButton){
runawayButton.remove();
}

responseButtons.remove();
imageDisplay.remove();

valentineQuestion.innerHTML = `
<img src="./images/image7.gif"
class="mx-auto w-[200px] mb-4" />
YEHEEEEEYyy!!!<br>
<span class="text-[20px] text-[#bd1e59]">
YAY! You have scored a baddie for Valentine's Day! &lt;3
</span>
`;

/* start background music after 3 sec */
setTimeout(() => {
bgMusic.play();
}, 500);

/* bouncing image */
const bounceImage = document.createElement("img");
bounceImage.src = "./images/baddie.jpg";
bounceImage.style.position = "fixed";
bounceImage.style.width = "300px";
bounceImage.style.height = "325px";
bounceImage.style.borderRadius = "50%";
bounceImage.style.border = "4px solid #ff5a5f";
document.body.appendChild(bounceImage);

startBouncing(bounceImage);

/* CONFETTI LOOP */
startConfettiLoop();

});

/* ---------------- CONFETTI LOOP ---------------- */

function startConfettiLoop(){

setInterval(() => {

confetti({
particleCount: 150,
spread: 100,
startVelocity: 40,
origin: { x: Math.random(), y: Math.random() - 0.2 }
});

}, 1500);

}

/* ---------------- BOUNCING IMAGE ---------------- */

function startBouncing(element){

let x = 100;
let y = 100;
let dx = 3;
let dy = 3;
let rotation = 0;

function move(){

const maxX = window.innerWidth - element.offsetWidth;
const maxY = window.innerHeight - element.offsetHeight;

if(x <= 0 || x >= maxX) dx *= -1;
if(y <= 0 || y >= maxY) dy *= -1;

x += dx;
y += dy;
rotation += 3;

element.style.left = x + "px";
element.style.top = y + "px";
element.style.transform = "rotate(" + rotation + "deg)";

requestAnimationFrame(move);
}

move();
}

</script>

</body>
</html>

